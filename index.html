<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Luau Obfuscator â€“ FUCK YOUR DECOMPILER</title>
  <style>
    body { background:#000; color:#ff0044; font-family:'Consolas',monospace; padding:20px; line-height:1.6; }
    h2 { color:#ff0044; text-shadow:0 0 15px #ff0044; }
    textarea { width:100%; height:340px; background:#0a0a0a; color:#ff0066; border:2px solid #ff0044; padding:15px; font-size:15px; resize:vertical; }
    button { margin:15px 8px 15px 0; padding:12px 30px; background:#ff0044; color:#000; border:none; font-weight:bold; text-transform:uppercase; cursor:pointer; }
    button:hover { background:#ff0066; }
    #options { margin:20px 0; color:#aaa; }
    label { margin-right:20px; }
    .warning { color:#ffdd00; font-weight:bold; font-size:16px; margin:10px 0; }
  </style>
</head>
<body>

<h2>Luau Obfuscator â€“ FUCK YOUR DECOMPILER (Keywords & Strings Fixed)</h2>
<p style="color:#ff6666">No more broken "then" or malformed strings â€¢ Safe for executors</p>

<textarea id="input" placeholder="Paste your Luau script here..."></textarea>

<div id="options">
  <label><input type="checkbox" id="encodeStrings" checked> Encode strings (safe)</label>
  <label><input type="checkbox" id="encodeNumbers" checked> Encode numbers</label>
  <label><input type="checkbox" id="junkCode" checked> Light junk code</label>
  <label><input type="checkbox" id="fakeVars" checked> Ghost variables</label>
  <label><input type="checkbox" id="nameChaos" checked> Destroy variable names</label>
</div>

<button onclick="fuckThisCode()">OBFUSCATE</button>

<div class="warning">FUCK YOUR DECOMPILER ðŸ˜­ â€” Obfuscated using https://zxkuhl.github.io/Test-for-website/</div>

<textarea id="output" readonly placeholder="Obfuscated code..."></textarea>
<button onclick="copyToClipboard()">Copy to Clipboard</button>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//   FIXED: Protects keywords like 'then', 'do', 'end' + robust strings
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function randGibberish(len) {
  const chars = "abcdefghijklmnopqrstuvwxyz0123456789";
  let s = "";
  for (let i = 0; i < len; i++) s += chars[Math.floor(Math.random() * chars.length)];
  return s;
}

function evilName() {
  const len = 8 + Math.floor(Math.random() * 5); // 8â€“12 chars
  let name = randGibberish(len);
  if (/^\d/.test(name)) name = "l" + name.slice(1);
  return name;
}

function safeStringEncode(str) {
  if (!document.getElementById("encodeStrings").checked) return `"${str}"`;

  // Properly unescape ALL common escapes
  let clean = str.replace(/\\(.)/g, (_, c) => {
    switch (c) {
      case 'n': return '\n';
      case 't': return '\t';
      case 'r': return '\r';
      case '"': return '"';
      case '\\': return '\\';
      case 'a': return '\x07';
      case 'b': return '\x08';
      case 'f': return '\x0C';
      case 'v': return '\x0B';
      default: return c;
    }
  });

  // If too long or contains weird chars â†’ fallback to original
  if (clean.length > 150 || /[\x00-\x1F\x7F]/.test(clean)) {
    return `"${str.replace(/"/g, '\\"')}"`; // safe escaped version
  }

  const codes = Array.from(clean).map(c => c.charCodeAt(0));
  return `string.char(${codes.join(",")})`;
}

function numberFuck(n) {
  if (!document.getElementById("encodeNumbers").checked) return n;
  return `tonumber("${n}")`;
}

function junkApocalypse() {
  if (!document.getElementById("junkCode").checked) return "";
  const lines = [];
  const count = Math.floor(Math.random() * 5) + 1;
  for (let i = 0; i < count; i++) {
    if (Math.random() < 0.5) lines.push(`local ${evilName()} = ${Math.floor(Math.random()*9999)};`);
    else lines.push(`local ${evilName()} = "${randGibberish(8)}";`);
  }
  return lines.join("\n") + "\n";
}

function ghostVars() {
  if (!document.getElementById("fakeVars").checked) return "";
  let s = "";
  const count = Math.floor(Math.random() * 4) + 1;
  for (let i = 0; i < count; i++) {
    s += `local ${evilName()} = ${Math.floor(Math.random()*99999)};\n`;
  }
  return s;
}

function fuckThisCode() {
  let code = document.getElementById("input").value.trim();
  if (!code) return;

  const vars = {}; // original â†’ consistent obfuscated name

  // Step 1: Collect user variables (skip ALL keywords & common globals)
  code.replace(/\b([a-zA-Z_][a-zA-Z0-9_]*)\b/g, (_, name) => {
    if (document.getElementById("nameChaos").checked) {
      const protected = [
        'and','break','do','else','elseif','end','false','for','function','if','in','local','nil','not','or',
        'repeat','return','then','true','until','while','goto',
        'self','wait','spawn','delay','task','game','script','workspace','Players','LocalPlayer','Character',
        'Humanoid','Vector3','CFrame','Color3','Instance','math','string','table','pairs','ipairs','next',
        'print','warn','error','pcall','xpcall','assert','type','typeof','require'
      ];
      if (!protected.includes(name)) {
        if (!vars[name]) vars[name] = evilName();
      }
    }
    return _;
  });

  // Step 2: Replace consistently
  for (const orig in vars) {
    const regex = new RegExp(`\\b${orig}\\b`, 'g');
    code = code.replace(regex, vars[orig]);
  }

  // Step 3: Encode strings â€“ now fully safe
  code = code.replace(/"([^"\\]*(?:\\.[^"\\]*)*)"/g, (_, content) => {
    return safeStringEncode(content);
  });

  // Step 4: Encode numbers
  code = code.replace(/\b(\d+(\.\d+)?)\b/g, (_, num) => {
    if (/[eE]/.test(_) || /["']/.test(_)) return _;
    return numberFuck(num);
  });

  // Step 5: Add light chaos
  code = ghostVars() + junkApocalypse() + code;

  // Header
  const header = `-- FUCK YOUR DECOMPILER ðŸ˜­\n-- Obfuscated using https://zxkuhl.github.io/Test-for-website/\n\n`;
  code = header + code;

  document.getElementById("output").value = code;
}

function copyToClipboard() {
  const out = document.getElementById("output");
  out.select();
  document.execCommand("copy");
  alert("Copied! This version should run without breaking 'then' or strings.");
}
</script>
</body>
</html>
